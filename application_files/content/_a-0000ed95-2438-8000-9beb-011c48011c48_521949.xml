<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000ed95-2438-8000-9beb-011c48011c48_521985</versionUuid>
    <rule>
        <name>MMVA_isEmailSubjectHavingUnwantedEmailContent</name>
        <uuid>_a-0000ed95-2438-8000-9beb-011c48011c48_521949</uuid>
        <description>Rule will check if email is having unwanted email content like Automatic Reply or Out of office etc.</description>
        <parentUuid>cdc99331-32be-4cc4-bd08-92476497169f</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>/*This expression does the following:
1. Defines a list of unwanted keywords.
2. Provides sample email data.
3. Filters the emails by checking if the subject contains any of the unwanted keywords.
4. Returns the filtered list of emails.*/
a!localVariables(
  local!unwantedKeywords: {
    "Out of Office",
    "Automatic Reply",
    "Do Not Reply",
    "No Response Needed",
    "Thank You for Your Email",
    "Receipt Confirmation",
    "Delivery Status Notification",
    "Undeliverable",
    "Failed Delivery",
    "Read Receipt",
    "Subscription Confirmation",
    "Unsubscribe",
    "Account Activation",
    "Password Reset",
    "Welcome",
    "Newsletter",
    "Promotion",
    "Special Offer",
    "Survey",
    "Invitation"
  },
  /* Sample email data */
  /* local!emails: {
    {
      subject: "Out of Office: John Doe",
      body: "I am currently out of the office..."
    },
    {
      subject: "Meeting Reminder",
      body: "Don't forget about the meeting..."
    },
    {
      subject: "Automatic Reply: Jane Smith",
      body: "I am on vacation..."
    }
  },
  a!forEach(
    items: local!emails,
    expression: if(
      a!isNotNullOrEmpty(
        wherecontains(
          1,
          find(local!unwantedKeywords, fv!item.subject)
        )
      ),
      {},
      fv!item
    )
  )*/
  if(
    a!isNotNullOrEmpty(
      wherecontains(
        1,
        find(
          lower(local!unwantedKeywords),
          lower(ri!emailSubject)
        )
      )
    ),
    true,
    false
  )
)</definition>
        <namedTypedValue>
            <name>emailSubject</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <preferredEditor>legacy</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
    </rule>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <history>
        <historyInfo versionUuid="_a-0000ed95-2438-8000-9beb-011c48011c48_521985"/>
    </history>
</contentHaul>
